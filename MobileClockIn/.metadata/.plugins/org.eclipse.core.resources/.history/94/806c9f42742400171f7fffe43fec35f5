package com.gess.base.util;

import java.io.IOException;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;

//import org.codehaus.jackson.JsonParseException;
//import org.codehaus.jackson.map.JsonMappingException;
//import org.codehaus.jackson.map.ObjectMapper;
//import org.codehaus.jackson.type.TypeReference;


public class JsonUtil {

	public static Map<String,Object> filterQueryToMap(String filter) throws JsonParseException, JsonMappingException, IOException {
		ObjectMapper mapper = new ObjectMapper();
		List<FilterDesc> filterList = mapper.readValue(filter,new TypeReference<List<FilterDesc>>() {});

		Map<String,Object> map = new LinkedHashMap<String,Object>();
		for (FilterDesc f :  filterList) {
			map.put(f.getProperty(), f.getValue());
		}
		return map;
	}
}
